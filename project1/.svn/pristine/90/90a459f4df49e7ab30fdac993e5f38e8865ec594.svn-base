<%@page import="oracle.net.aso.q"%>
<%@page import="member.MemberDTO"%>
<%@page import="question.QuestionDAO"%>
<%@page import="question.QuestionDTO"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%
	//비정상적인 요청에 대한 응답처리 => 전달값이 존재하지 않을 경우
	if(request.getParameter("num")==null){
		out.println("<script>");
		out.println("location.href='"+request.getContextPath()+"/codeforbeauty.com/shop/admin/index_admin.jsp?workgroup=content&work=question_admin';");
		out.println("</script>");
		return;
	}

	//전달값을 반환받아 저장
	int num=Integer.parseInt(request.getParameter("num"));
	String pageNum=request.getParameter("pageNum");
	String search=request.getParameter("search");
	String keyword=request.getParameter("keyword");
	
	//게시글 번호를 전달하여 questiontable 테이블에 저장된 게시글을 검색하여 반환하는 DAO 클래스의 메소드 호출
	QuestionDTO question=QuestionDAO.getDAO().getBoard(num);
	
	//비정상적인 요청에 대한 응답 처리
	// => 검색된 게시글이 없는 경우
		if(question==null) {
			out.println("<script>");
			out.println("location.href='"+request.getContextPath()+"/codeforbeauty.com/shop/admin/index_admin.jsp?workgroup=content&work=question_admin';");
			out.println("</script>");
			return;
		}

	
	//조회수 증가
	QuestionDAO.getDAO().modifyReadCount(num);

%>
<div id="content">
            <h2>문의하기</h2>
            <table>
            	
            	<tr>
            		<th>작성자</th>
            		<td>
            			<%=question.getId() %>
            		</td>
            	</tr>
            	
            	<tr>
            		<th>작성일</th>
            		<td><%=question.getDateCreated().substring(0, 19) %></td>
            	</tr>
            	
            	<tr>
            		<th>제목</th>
            		<td calss="title">
            			<%=question.getTitle() %>
            		</td>
            	</tr>
            	
            	<tr>
            		<th>내용</th>
            		<td class="content">
            			<%=question.getContent().replace("\n", "<br>") %>
            		</td>
            	</tr>
            </table>
            
            
       <div id="board_menu">
      		<button type="button" id="removeBtn">글삭제</button>
			<button type="button" id="replyBtn">답글쓰기</button>
			<button type="button" id="listBtn">게시글목록</button>
       </div>     
</div>  
  
<form id="questionForm" method="post">
    <input type="hidden" name="num" value="<%=num%>">
	<input type="hidden" name="pageNum" value="<%=pageNum%>">
	<input type="hidden" name="search" value="<%=search%>">
	<input type="hidden" name="keyword" value="<%=keyword%>">
</form> 

<script type="text/javascript">
$("#removeBtn").click(function() {
	if(confirm("정말로 삭제 하시겠습니까?")) {
		$("#boardForm").attr("action", "<%=request.getContextPath()%>/site/board/board_remove_action.jsp");
		$("#boardForm").submit();
	}
});


<%-- $("#replyBtn").click(function() {
	$("#boardForm").attr("action", "<%=request.getContextPath()%>/site/index.jsp?workgroup=board&work=board_write&ref=<%=board.getRef()%>&reStep=<%=board.getReStep()%>&reLevel=<%=board.getReLevel()%>");
	$("#boardForm").submit();
}); --%>

$("#listBtn").click(function() {
	$("#boardForm").attr("action", "<%=request.getContextPath()%>/site/index.jsp?workgroup=board&work=board_list");
	$("#boardForm").submit();
});
</script> 

        